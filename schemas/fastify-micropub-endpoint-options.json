{
  "$id": "fastify-micropub-endpoint-options",
  "description": "Options for the Fastify micropub-endpoint plugin",
  "title": "Micropub Endpoint Options",
  "type": "object",
  "properties": {
    "ajv": {
      "description": "Instance of Ajv"
    },
    "create": {
      "title": "Create post",
      "description": "[Creates](https://micropub.spec.indieweb.org/#create) a post on the Micropub server.",
      "type": "Function",
      "parameters": [
        {
          "type": "object",
          "properties": {
            "action": {
              "type": "string"
            },
            "audio": {
              "anyOf": [
                {
                  "$id": "u-url",
                  "title": "URL of the card, entry, event, etc.",
                  "description": "URL to use in h-card, h-entry, h-event, etc.",
                  "format": "uri",
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "$id": "u-url",
                    "title": "URL of the card, entry, event, etc.",
                    "description": "URL to use in h-card, h-entry, h-event, etc.",
                    "format": "uri",
                    "type": "string"
                  }
                }
              ]
            },
            "author": {},
            "bookmark-of": {
              "format": "uri",
              "type": "string"
            },
            "category": {
              "anyOf": [
                {
                  "minLength": 1,
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "minLength": 1,
                    "type": "string"
                  }
                }
              ]
            },
            "checkin": {
              "minLength": 1,
              "type": "string"
            },
            "content": {
              "anyOf": [
                {
                  "$id": "p-content",
                  "description": "Some plain text content",
                  "title": "content",
                  "minLength": 0,
                  "type": "string"
                },
                {
                  "$id": "e-content",
                  "title": "content with `html` and optional `text`",
                  "type": "object",
                  "properties": {
                    "html": {
                      "description": "The text/html version of the containing object. `html` MUST be a single string value only.",
                      "minLength": 1,
                      "type": "string"
                    },
                    "text": {
                      "description": "The text/plain version of the containing object. `text` MUST be a single string value only.",
                      "minLength": 1,
                      "type": "string"
                    }
                  },
                  "required": [
                    "html"
                  ]
                }
              ]
            },
            "date": {
              "minLength": 1,
              "type": "string"
            },
            "in-reply-to": {
              "format": "uri",
              "type": "string"
            },
            "like-of": {
              "format": "uri",
              "type": "string"
            },
            "mp-channel": {
              "minLength": 1,
              "type": "string"
            },
            "mp-destination": {
              "minLength": 1,
              "type": "string"
            },
            "mp-limit": {
              "minLength": 1,
              "type": "string"
            },
            "mp-photo-alt": {
              "anyOf": [
                {
                  "minLength": 1,
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "minLength": 1,
                    "type": "string"
                  }
                }
              ]
            },
            "mp-slug": {
              "minLength": 1,
              "type": "string"
            },
            "mp-syndicate-to": {
              "anyOf": [
                {
                  "minLength": 1,
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "minLength": 1,
                    "type": "string"
                  }
                }
              ]
            },
            "name": {
              "minLength": 1,
              "type": "string"
            },
            "photo": {},
            "post-status": {
              "minLength": 1,
              "type": "string"
            },
            "published": {
              "minLength": 1,
              "type": "string"
            },
            "read-of": {
              "format": "uri",
              "type": "string"
            },
            "read-status": {
              "anyOf": [
                {
                  "const": "to-read",
                  "type": "string"
                },
                {
                  "const": "reading",
                  "type": "string"
                },
                {
                  "const": "finished",
                  "type": "string"
                }
              ]
            },
            "repost-of": {
              "format": "uri",
              "type": "string"
            },
            "rsvp": {
              "anyOf": [
                {
                  "const": "yes",
                  "type": "string"
                },
                {
                  "const": "no",
                  "type": "string"
                },
                {
                  "const": "maybe",
                  "type": "string"
                },
                {
                  "const": "interested",
                  "type": "string"
                }
              ]
            },
            "summary": {
              "$id": "p-summary",
              "title": "Summary",
              "description": "Summary to use in h-entry, h-recipe, h-resume.",
              "minLength": 1,
              "type": "string"
            },
            "syndication": {
              "$id": "u-syndication",
              "title": "Syndication",
              "description": "URL(s) of syndicated copies of this post. The property equivalent of rel-syndication.",
              "anyOf": [
                {
                  "description": "syndication target",
                  "format": "uri",
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "description": "syndication target",
                    "format": "uri",
                    "type": "string"
                  }
                }
              ]
            },
            "updated": {
              "minLength": 1,
              "type": "string"
            },
            "url": {
              "$id": "u-url",
              "title": "URL of the card, entry, event, etc.",
              "description": "URL to use in h-card, h-entry, h-event, etc.",
              "format": "uri",
              "type": "string"
            },
            "video": {
              "anyOf": [
                {
                  "$id": "u-url",
                  "title": "URL of the card, entry, event, etc.",
                  "description": "URL to use in h-card, h-entry, h-event, etc.",
                  "format": "uri",
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "$id": "u-url",
                    "title": "URL of the card, entry, event, etc.",
                    "description": "URL to use in h-card, h-entry, h-event, etc.",
                    "format": "uri",
                    "type": "string"
                  }
                }
              ]
            },
            "visibility": {
              "minLength": 1,
              "type": "string"
            },
            "type": {
              "default": "entry",
              "title": "JF2 item type",
              "anyOf": [
                {
                  "const": "card",
                  "type": "string"
                },
                {
                  "const": "cite",
                  "type": "string"
                },
                {
                  "const": "entry",
                  "type": "string"
                },
                {
                  "const": "event",
                  "type": "string"
                }
              ]
            }
          }
        }
      ],
      "returns": {
        "type": "Promise",
        "item": {}
      }
    },
    "delete": {
      "title": "Delete post",
      "description": "[Deletes](https://micropub.spec.indieweb.org/#delete) a post published at a URL.",
      "type": "Function",
      "parameters": [
        {
          "description": "A URL",
          "format": "uri",
          "type": "string"
        }
      ],
      "returns": {
        "type": "Promise",
        "item": {}
      }
    },
    "includeErrorDescription": {
      "default": false,
      "type": "boolean"
    },
    "isAccessTokenRevoked": {
      "title": "isAccessTokenRevoked",
      "description": "Predicate function that returns true if a jti (JSON Web Token ID) is revoked.",
      "type": "Function",
      "parameters": [
        {
          "description": "Unique identifier for the JWT",
          "minLength": 1,
          "title": "\"jti\" (JWT ID) Claim",
          "type": "string"
        }
      ],
      "returns": {
        "type": "Promise",
        "item": {
          "type": "boolean"
        }
      }
    },
    "logPrefix": {
      "default": "[micropub-endpoint] ",
      "type": "string"
    },
    "me": {
      "anyOf": [
        {
          "description": "Profile URL (before URL Canonicalization)",
          "minLength": 1,
          "title": "me (not canonicalized)",
          "type": "string"
        },
        {
          "description": "Profile URL (after URL Canonicalization)",
          "format": "uri",
          "title": "me (canonicalized)",
          "type": "string"
        }
      ]
    },
    "mediaEndpoint": {
      "format": "uri",
      "title": "Media endpoint",
      "type": "string"
    },
    "micropubEndpoint": {
      "format": "uri",
      "title": "Micropub endpoint",
      "type": "string"
    },
    "multipartFormDataMaxFileSize": {
      "title": "multipart/form-data max file size",
      "description": "Max file size (in bytes) for multipart/form-data requests.",
      "default": 10000000,
      "minimum": 0,
      "type": "number"
    },
    "reportAllAjvErrors": {
      "description": "Whether to report all AJV validation errors.",
      "title": "report all AJV errors",
      "default": false,
      "type": "boolean"
    },
    "syndicateTo": {
      "default": [],
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "uid": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "service": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "url": {
                "type": "string"
              },
              "photo": {
                "type": "string"
              }
            },
            "required": [
              "name",
              "url"
            ]
          },
          "user": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "url": {
                "type": "string"
              },
              "photo": {
                "type": "string"
              }
            },
            "required": [
              "name",
              "url"
            ]
          }
        },
        "required": [
          "uid",
          "name"
        ]
      }
    },
    "undelete": {
      "title": "Undelete post",
      "description": "[Undeletes](https://micropub.spec.indieweb.org/#delete) a post published at a URL.",
      "type": "Function",
      "parameters": [
        {
          "description": "A URL",
          "format": "uri",
          "type": "string"
        }
      ],
      "returns": {
        "type": "Promise",
        "item": {}
      }
    },
    "update": {
      "title": "Update post",
      "description": "[Updates](https://micropub.spec.indieweb.org/#update) a post published at a URL.",
      "type": "Function",
      "parameters": [
        {
          "description": "A URL",
          "format": "uri",
          "type": "string"
        },
        {
          "type": "object",
          "properties": {
            "add": {},
            "delete": {
              "minLength": 1,
              "type": "string"
            },
            "replace": {}
          }
        }
      ],
      "returns": {
        "type": "Promise",
        "item": {}
      }
    }
  },
  "required": [
    "create",
    "delete",
    "isAccessTokenRevoked",
    "me",
    "update"
  ]
}