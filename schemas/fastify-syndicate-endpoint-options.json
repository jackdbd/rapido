{
  "$id": "fastify-syndicate-endpoint-options",
  "description": "Options for the Fastify syndicate-endpoint plugin",
  "title": "Syndicate Endpoint Options",
  "type": "object",
  "properties": {
    "ajv": {
      "description": "Instance of Ajv"
    },
    "includeErrorDescription": {
      "description": "Whether to include an `error_description` property in all error responses. This is meant to assist the client developer in understanding the error. This is NOT meant to be shown to the end user.",
      "default": false,
      "type": "boolean"
    },
    "isAccessTokenRevoked": {
      "title": "isAccessTokenRevoked",
      "description": "Predicate function that returns true if a jti (JSON Web Token ID) is revoked.",
      "type": "Function",
      "parameters": [
        {
          "description": "Unique identifier for the JWT",
          "minLength": 1,
          "title": "\"jti\" (JWT ID) Claim",
          "type": "string"
        }
      ],
      "returns": {
        "type": "Promise",
        "item": {
          "type": "boolean"
        }
      }
    },
    "logPrefix": {
      "default": "[syndicate-endpoint] ",
      "type": "string"
    },
    "me": {
      "anyOf": [
        {
          "description": "Profile URL (before URL Canonicalization)",
          "minLength": 1,
          "title": "me (not canonicalized)",
          "type": "string"
        },
        {
          "description": "Profile URL (after URL Canonicalization)",
          "format": "uri",
          "title": "me (canonicalized)",
          "type": "string"
        }
      ]
    },
    "websiteUrlToStoreLocation": {
      "title": "Website URL to store location",
      "description": "Maps a URL published on the user's website to a location on the user's store (e.g. a table in a database, a path in a git repository, a URL in a public bucket of an object storage service like AWS S3).",
      "type": "Function",
      "parameters": [
        {
          "format": "uri",
          "type": "string"
        }
      ],
      "returns": {
        "type": "object",
        "properties": {
          "store": {
            "minLength": 1,
            "type": "string"
          },
          "store_deleted": {
            "minLength": 1,
            "type": "string"
          },
          "website": {
            "minLength": 1,
            "type": "string"
          }
        },
        "required": [
          "store",
          "website"
        ]
      }
    },
    "reportAllAjvErrors": {
      "description": "Whether to report all AJV validation errors.",
      "title": "report all AJV errors",
      "default": false,
      "type": "boolean"
    },
    "retrievePost": {
      "title": "retrieveContent",
      "description": "Retrieves a post from the Micropub server.",
      "type": "Function",
      "parameters": [
        {
          "type": "object",
          "properties": {
            "store": {
              "minLength": 1,
              "type": "string"
            },
            "store_deleted": {
              "minLength": 1,
              "type": "string"
            },
            "website": {
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "store",
            "website"
          ]
        }
      ],
      "returns": {
        "type": "Promise",
        "item": {
          "type": "object",
          "properties": {
            "jf2": {
              "type": "object",
              "properties": {
                "action": {
                  "type": "string"
                },
                "audio": {
                  "anyOf": [
                    {
                      "title": "URL of the card, entry, event, etc.",
                      "description": "URL to use in h-card, h-entry, h-event, etc.",
                      "format": "uri",
                      "type": "string"
                    },
                    {
                      "type": "array",
                      "items": {
                        "title": "URL of the card, entry, event, etc.",
                        "description": "URL to use in h-card, h-entry, h-event, etc.",
                        "format": "uri",
                        "type": "string"
                      }
                    }
                  ]
                },
                "author": {},
                "bookmark-of": {
                  "title": "URL of the card, entry, event, etc.",
                  "description": "URL to use in h-card, h-entry, h-event, etc.",
                  "format": "uri",
                  "type": "string"
                },
                "category": {
                  "anyOf": [
                    {
                      "minLength": 1,
                      "type": "string"
                    },
                    {
                      "type": "array",
                      "items": {
                        "minLength": 1,
                        "type": "string"
                      }
                    }
                  ]
                },
                "checkin": {
                  "minLength": 1,
                  "type": "string"
                },
                "content": {
                  "anyOf": [
                    {
                      "$id": "p-content",
                      "description": "Some plain text content",
                      "title": "content",
                      "minLength": 0,
                      "type": "string"
                    },
                    {
                      "$id": "e-content",
                      "title": "content with `html` and optional `text`",
                      "type": "object",
                      "properties": {
                        "html": {
                          "description": "The text/html version of the containing object. `html` MUST be a single string value only.",
                          "minLength": 1,
                          "type": "string"
                        },
                        "text": {
                          "description": "The text/plain version of the containing object. `text` MUST be a single string value only.",
                          "minLength": 1,
                          "type": "string"
                        }
                      },
                      "required": [
                        "html"
                      ]
                    }
                  ]
                },
                "date": {
                  "minLength": 1,
                  "type": "string"
                },
                "in-reply-to": {
                  "title": "URL of the card, entry, event, etc.",
                  "description": "URL to use in h-card, h-entry, h-event, etc.",
                  "format": "uri",
                  "type": "string"
                },
                "like-of": {
                  "title": "URL of the card, entry, event, etc.",
                  "description": "URL to use in h-card, h-entry, h-event, etc.",
                  "format": "uri",
                  "type": "string"
                },
                "location": {
                  "anyOf": [
                    {
                      "$id": "p-location",
                      "description": "Location in plain text.",
                      "minLength": 1,
                      "type": "string"
                    },
                    {
                      "$id": "p-geo",
                      "pattern": "geo:-?[0-9]{1,2}.[0-9]*,-?[0-9]{1,3}.?[0-9]*(;u=[0-9]{1,2})?",
                      "minLength": 8,
                      "title": "geo URI",
                      "description": "The geo URI scheme is a Uniform Resource Identifier (URI) scheme defined by the Internet Engineering Task Force's RFC 5870",
                      "examples": [
                        "geo:37.786971,-122.399677",
                        "geo:37.786971,-122.399677;u=35"
                      ],
                      "type": "string"
                    },
                    {
                      "$id": "h-adr",
                      "title": "microformats2 h-adr",
                      "description": "h-adr is a simple, open format for publishing structured locations such as addresses, physical and/or postal.",
                      "examples": [
                        {
                          "altitude": 43,
                          "country-name": "Iceland",
                          "latitude": 64.128288,
                          "locality": "Reykjavík",
                          "longitude": -21.827774,
                          "postal-code": "107",
                          "street-address": "17 Austerstræti"
                        },
                        {
                          "geo": {
                            "latitude": 64.128288,
                            "locality": "Reykjavík",
                            "longitude": -21.827774
                          }
                        },
                        {
                          "geo": "geo:37.786971,-122.399677;u=35"
                        }
                      ],
                      "type": "object",
                      "properties": {
                        "altitude": {
                          "$id": "p-altitude",
                          "description": "Distance in metres from the nominal sea level along the tangent of the earth’s curve, i.e. the geoid height.",
                          "title": "Altitude",
                          "type": "number"
                        },
                        "country-name": {
                          "type": "string"
                        },
                        "extended-address": {
                          "type": "string"
                        },
                        "geo": {
                          "anyOf": [
                            {
                              "$ref": "p-geo"
                            },
                            {
                              "$ref": "h-geo"
                            }
                          ]
                        },
                        "label": {
                          "type": "string"
                        },
                        "latitude": {
                          "$id": "p-latitude",
                          "minimum": -90,
                          "maximum": 90,
                          "title": "Latitude",
                          "description": "Coordinate that specifies the north–south position of a point on the surface of the Earth, in decimal degrees.",
                          "type": "number"
                        },
                        "locality": {
                          "type": "string"
                        },
                        "longitude": {
                          "$id": "p-longitude",
                          "description": "Coordinate that specifies the east–west position of a point on the surface of the Earth, in decimal degrees.",
                          "title": "Longitude",
                          "minimum": -180,
                          "maximum": 180,
                          "type": "number"
                        },
                        "post-office-box": {
                          "type": "string"
                        },
                        "postal-code": {
                          "type": "string"
                        },
                        "region": {
                          "type": "string"
                        },
                        "street-address": {
                          "type": "string"
                        }
                      }
                    }
                  ]
                },
                "mp-channel": {
                  "minLength": 1,
                  "type": "string"
                },
                "mp-destination": {
                  "minLength": 1,
                  "type": "string"
                },
                "mp-limit": {
                  "minLength": 1,
                  "type": "string"
                },
                "mp-photo-alt": {
                  "anyOf": [
                    {
                      "minLength": 1,
                      "type": "string"
                    },
                    {
                      "type": "array",
                      "items": {
                        "minLength": 1,
                        "type": "string"
                      }
                    }
                  ]
                },
                "mp-slug": {
                  "minLength": 1,
                  "type": "string"
                },
                "mp-syndicate-to": {
                  "anyOf": [
                    {
                      "minLength": 1,
                      "type": "string"
                    },
                    {
                      "type": "array",
                      "items": {
                        "minLength": 1,
                        "type": "string"
                      }
                    }
                  ]
                },
                "name": {
                  "minLength": 1,
                  "type": "string"
                },
                "photo": {},
                "post-status": {
                  "minLength": 1,
                  "type": "string"
                },
                "published": {
                  "minLength": 1,
                  "type": "string"
                },
                "read-of": {
                  "anyOf": [
                    {
                      "title": "URL of the card, entry, event, etc.",
                      "description": "URL to use in h-card, h-entry, h-event, etc.",
                      "format": "uri",
                      "type": "string"
                    },
                    {
                      "$id": "h-cite",
                      "title": "microformats2 h-cite",
                      "description": "h-cite is a simple, open format for publishing citations and references to online and other publications.",
                      "examples": [
                        {
                          "author": "Isaac Newton",
                          "name": "The Correspondence of Isaac Newton: Volume 5",
                          "content": "If I have seen further it is by standing on the shoulders of Giants."
                        }
                      ],
                      "type": "object",
                      "properties": {
                        "accessed": {
                          "$ref": "dt-accessed"
                        },
                        "author": {
                          "$ref": "p-author"
                        },
                        "content": {
                          "$ref": "p-content"
                        },
                        "name": {
                          "$ref": "p-name"
                        },
                        "publication": {
                          "$ref": "p-publication"
                        },
                        "published": {
                          "$ref": "dt-published"
                        },
                        "type": {
                          "const": "cite",
                          "type": "string"
                        },
                        "uid": {
                          "$ref": "u-uid"
                        },
                        "url": {
                          "$ref": "u-url"
                        }
                      },
                      "required": [
                        "type"
                      ]
                    }
                  ]
                },
                "read-status": {
                  "anyOf": [
                    {
                      "const": "to-read",
                      "type": "string"
                    },
                    {
                      "const": "reading",
                      "type": "string"
                    },
                    {
                      "const": "finished",
                      "type": "string"
                    }
                  ]
                },
                "repost-of": {
                  "title": "URL of the card, entry, event, etc.",
                  "description": "URL to use in h-card, h-entry, h-event, etc.",
                  "format": "uri",
                  "type": "string"
                },
                "rsvp": {
                  "anyOf": [
                    {
                      "const": "yes",
                      "type": "string"
                    },
                    {
                      "const": "no",
                      "type": "string"
                    },
                    {
                      "const": "maybe",
                      "type": "string"
                    },
                    {
                      "const": "interested",
                      "type": "string"
                    }
                  ]
                },
                "summary": {
                  "$id": "p-summary",
                  "title": "Summary",
                  "description": "Summary to use in h-entry, h-recipe, h-resume.",
                  "minLength": 1,
                  "type": "string"
                },
                "syndication": {
                  "$id": "u-syndication",
                  "title": "Syndication",
                  "description": "URL(s) of syndicated copies of this post. The property equivalent of rel-syndication.",
                  "anyOf": [
                    {
                      "description": "syndication target",
                      "format": "uri",
                      "type": "string"
                    },
                    {
                      "type": "array",
                      "items": {
                        "description": "syndication target",
                        "format": "uri",
                        "type": "string"
                      }
                    }
                  ]
                },
                "updated": {
                  "minLength": 1,
                  "type": "string"
                },
                "url": {
                  "title": "URL of the card, entry, event, etc.",
                  "description": "URL to use in h-card, h-entry, h-event, etc.",
                  "format": "uri",
                  "type": "string"
                },
                "video": {
                  "anyOf": [
                    {
                      "title": "URL of the card, entry, event, etc.",
                      "description": "URL to use in h-card, h-entry, h-event, etc.",
                      "format": "uri",
                      "type": "string"
                    },
                    {
                      "type": "array",
                      "items": {
                        "title": "URL of the card, entry, event, etc.",
                        "description": "URL to use in h-card, h-entry, h-event, etc.",
                        "format": "uri",
                        "type": "string"
                      }
                    }
                  ]
                },
                "visibility": {
                  "minLength": 1,
                  "type": "string"
                },
                "type": {
                  "default": "entry",
                  "title": "JF2 item type",
                  "anyOf": [
                    {
                      "const": "card",
                      "type": "string"
                    },
                    {
                      "const": "cite",
                      "type": "string"
                    },
                    {
                      "const": "entry",
                      "type": "string"
                    },
                    {
                      "const": "event",
                      "type": "string"
                    }
                  ]
                }
              }
            },
            "sha": {
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "jf2"
          ]
        }
      }
    },
    "syndicators": {},
    "updatePost": {
      "title": "Update post",
      "description": "[Updates](https://micropub.spec.indieweb.org/#update) a post published at a URL.",
      "type": "Function",
      "parameters": [
        {
          "format": "uri",
          "type": "string"
        },
        {
          "type": "object",
          "properties": {
            "add": {},
            "delete": {
              "minLength": 1,
              "type": "string"
            },
            "replace": {}
          }
        }
      ],
      "returns": {
        "type": "Promise",
        "item": {
          "type": "void"
        }
      }
    }
  },
  "required": [
    "isAccessTokenRevoked",
    "me",
    "websiteUrlToStoreLocation",
    "retrievePost",
    "syndicators",
    "updatePost"
  ]
}